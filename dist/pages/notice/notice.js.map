{"version":3,"file":"pages/notice/notice.js","sources":["webpack:///./src/pages/notice/notice.jsx","webpack:///./src/pages/notice/notice.jsx?2c23","webpack:///./src/pages/notice/notice.scss"],"sourcesContent":["import React, { Component } from 'react';\nimport Taro from '@tarojs/taro'\nimport {\n  View,\n  Image,\n  Text\n} from '@tarojs/components';\nimport { connect } from 'react-redux';\nimport { AtBadge } from 'taro-ui';\n\nimport { Notice as NoticeService } from '../../common/api';\n\nimport './notice.scss';\n\n@connect(({ user }) => ({\n  user\n}))\nclass Notice extends Component {\n\n  state = {\n    countObj: null,\n  }\n\n  componentDidMount() {\n    const { user } = this.props;\n    if (!user) {\n      Taro.showToast({\n        icon: 'none',\n        title: '请先绑定微信帐号'\n      });\n      Taro.switchTab({\n        url: '/pages/me/me',\n      });\n      return;\n    }\n  }\n\n  componentDidShow() {\n    this.init();\n  }\n\n  async init() {\n    const countObj = await NoticeService.count();\n    if (countObj) {\n      this.setState({\n        countObj,\n      })\n    }\n  }\n\n  goNoticeList(type) {\n    Taro.navigateTo({\n      url: '/pages/subPackage/notice-list/notice-list?type='+type\n    });\n  }\n\n  render() {\n    const { countObj } = this.state;\n    return (\n      <View>\n        {\n          countObj && (\n            <View>\n              <View\n                className='card'\n                onClick={() => this.goNoticeList('official')}\n              >\n                <AtBadge value={countObj.official} maxValue={99}>\n                  <Image className='icon' src='../../images/tongzhi.svg' />\n                </AtBadge>\n                <Text className='official'>官方通知</Text>\n              </View>\n              <View\n                className='card'\n                onClick={() => this.goNoticeList('follow')}\n              >\n                <AtBadge value={countObj.follow} maxValue={99}>\n                  <Image className='icon' src='../../images/fans.svg' />\n                </AtBadge>\n                <Text className=''>新粉丝</Text>\n              </View>\n              <View\n                className='card'\n                onClick={() => this.goNoticeList('comment')}\n              >\n                <AtBadge value={countObj.comment} maxValue={99}>\n                  <Image className='icon' src='../../images/pinglun.svg' />\n                </AtBadge>\n                <Text className=''>帖子被评论</Text>\n              </View>\n              <View\n                className='card'\n                onClick={() => this.goNoticeList('reply')}\n              >\n                <AtBadge value={countObj.reply} maxValue={99}>\n                  <Image className='icon' src='../../images/huifupingluns.svg' />\n                </AtBadge>\n                <Text className=''>评论被回复</Text>\n              </View>\n            </View>\n          )\n        }\n      </View>\n    )\n  }\n}\n\nexport default Notice;\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./notice.jsx\"\nvar config = {\"navigationBarTitleText\":\"消息通知\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/notice/notice', {}, config || {}))\n\n","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAKA;AACA;AAEA;AAEA;AAKA;AAHA;AAAA;AACA;AADA;AAAA;;;;;;;;;;;;;;;;AAKA;AACA;AADA;AACA;;;;;;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AADA;AAGA;AACA;AACA;;;AAEA;AACA;AACA;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;AASA;AACA;AACA;AADA;AAGA;;;AAEA;AAAA;AACA;AADA;AAEA;AAMA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAGA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAGA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAGA;AACA;AAAA;AAAA;AAFA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAOA;;;;AAvFA;AA0FA;;;;;;;;;;;;;AC3GA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;;;;A","sourceRoot":""}