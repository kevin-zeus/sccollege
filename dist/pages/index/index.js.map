{"version":3,"file":"pages/index/index.js","sources":["webpack:///./src/pages/index/index.jsx","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/lodash/isFunction.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./src/actions/hometabs.js","webpack:///./src/components/navigator/navigator.jsx","webpack:///./src/components/navigator/navigator.scss","webpack:///./src/components/page-activity/page-activity.jsx","webpack:///./src/components/page-activity/page-activity.scss","webpack:///./src/components/page-recommend/page-recommend.jsx","webpack:///./src/components/page-recommend/page-recommend.scss","webpack:///./src/components/page-topic/page-topic.jsx","webpack:///./src/components/page-topic/page-topic.scss","webpack:///./src/components/tab-bar/tab-bar.jsx","webpack:///./src/components/tab-bar/tab-bar.scss","webpack:///./src/components/with/with-auth.jsx","webpack:///./src/font.css","webpack:///./src/pages/index/index.jsx?1fd8","webpack:///./src/pages/index/index.scss"],"sourcesContent":["import React, { Component } from 'react';\nimport Taro from '@tarojs/taro'\nimport { View, Swiper, SwiperItem } from '@tarojs/components'\n\nimport { connect } from 'react-redux'\n\nimport tabChange from '../../actions/hometabs'\n\nimport './index.scss'\n\nimport NavBar from '../../components/navigator/navigator';\nimport Tabs from '../../components/tab-bar/tab-bar';\nimport Topic from '../../components/page-topic/page-topic';\nimport Recommend from '../../components/page-recommend/page-recommend';\nimport Activity from '../../components/page-activity/page-activity';\nimport WithAuth from '../../components/with/with-auth';\n\n@connect(({ hometabs }) => ({\n  hometabs\n}), (dispatch) => ({\n  dispatchTabChange(index) {\n    dispatch(tabChange(index))\n  }\n}))\nclass Index extends Component {\n\n  state = {\n    labels: ['话题', '推荐', '活动'],\n    action_right: 15,\n  }\n\n  componentDidMount() {\n    console.log(this.props);\n  }\n\n  onTabChange = (index) => {\n    this.props.dispatchTabChange(index);\n  }\n\n  onChange = (e) => {\n    const { current, source } = e.detail;\n    if (source == 'touch') {\n      this.props.dispatchTabChange(current);\n    }\n  }\n\n  goEdit = () => {\n    Taro.navigateTo({\n      url: '/pages/post-edit/post-edit'\n    });\n  }\n\n  render() {\n    const { labels, action_right } = this.state;\n    const { tabIndex } = this.props.hometabs;\n    return (\n      <View className='container'>\n        <NavBar\n          renderLeft={\n            <Tabs labels={labels} selectedIndex={tabIndex} onTabChange={this.onTabChange} />\n          }\n        />\n        <Swiper\n          style={{\n            height: 'calc(100vh - 64px)'\n          }}\n          current={tabIndex}\n          onChange={this.onChange}\n        >\n          <SwiperItem>\n            <Topic />\n          </SwiperItem>\n          <SwiperItem>\n            <Recommend />\n          </SwiperItem>\n          <SwiperItem>\n            <Activity />\n          </SwiperItem>\n        </Swiper>\n\n        <View className='home-action' style={{right: `${action_right}px`}}>\n          <WithAuth onClick={this.goEdit}>\n            <View className='btn-circle btn-i'>\n              <View className='icon icon-xiezuo'></View>\n            </View>\n          </WithAuth>\n          {/* <View className='btn-share btn-i' onClick='goMoney'>\n            <View className='icon icon-hongbao'></View>\n            <View className='dot'>认证领¥30</View>\n          </View> */}\n        </View>\n      </View>\n    )\n  }\n}\n\nexport default Index\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","import { TAB_CHANGE } from '../constants/hometabs';\n\nconst tabChange = (index) => {\n  return {\n    type: TAB_CHANGE,\n    index,\n  }\n}\n\nexport default tabChange;\n","/* eslint-disable react/sort-comp */\nimport _isFunction from 'lodash/isFunction';\nimport React, { Component } from 'react';\nimport Taro from '@tarojs/taro';\nimport { View } from '@tarojs/components';\nimport './navigator.scss';\n\nfunction getSystemInfo() {\n  if (Taro.globalSystemInfo && !Taro.globalSystemInfo.ios) {\n    return Taro.globalSystemInfo;\n  } else {\n    // h5环境下忽略navbar\n    if (!_isFunction(Taro.getSystemInfoSync)) {\n      return null;\n    }\n    let systemInfo = Taro.getSystemInfoSync() || {\n      model: '',\n      system: ''\n    };\n    let ios = !!(systemInfo.system.toLowerCase().search('ios') + 1);\n    let rect;\n    try {\n      rect = Taro.getMenuButtonBoundingClientRect ? Taro.getMenuButtonBoundingClientRect() : null;\n      if (rect === null) {\n        throw 'getMenuButtonBoundingClientRect error';\n      }\n      //取值为0的情况  有可能width不为0 top为0的情况\n      if (!rect.width || !rect.top || !rect.left || !rect.height) {\n        throw 'getMenuButtonBoundingClientRect error';\n      }\n    } catch (error) {\n      let gap = ''; //胶囊按钮上下间距 使导航内容居中\n      let width = 96; //胶囊的宽度\n      if (systemInfo.platform === 'android') {\n        gap = 8;\n        width = 96;\n      } else if (systemInfo.platform === 'devtools') {\n        if (ios) {\n          gap = 5.5; //开发工具中ios手机\n        } else {\n          gap = 7.5; //开发工具中android和其他手机\n        }\n      } else {\n        gap = 4;\n        width = 88;\n      }\n      if (!systemInfo.statusBarHeight) {\n        //开启wifi的情况下修复statusBarHeight值获取不到\n        systemInfo.statusBarHeight = systemInfo.screenHeight - systemInfo.windowHeight - 20;\n      }\n      rect = {\n        //获取不到胶囊信息就自定义重置一个\n        bottom: systemInfo.statusBarHeight + gap + 32,\n        height: 32,\n        left: systemInfo.windowWidth - width - 10,\n        right: systemInfo.windowWidth - 10,\n        top: systemInfo.statusBarHeight + gap,\n        width: width\n      };\n      console.log('error', error);\n      console.log('rect', rect);\n    }\n\n    let navBarHeight = '';\n    if (!systemInfo.statusBarHeight) {\n      //开启wifi和打电话下\n      systemInfo.statusBarHeight = systemInfo.screenHeight - systemInfo.windowHeight - 20;\n      navBarHeight = (function() {\n        let gap = rect.top - systemInfo.statusBarHeight;\n        return 2 * gap + rect.height;\n      })();\n\n      systemInfo.statusBarHeight = 0;\n      systemInfo.navBarExtendHeight = 0; //下方扩展4像素高度 防止下方边距太小\n    } else {\n      navBarHeight = (function() {\n        let gap = rect.top - systemInfo.statusBarHeight;\n        return systemInfo.statusBarHeight + 2 * gap + rect.height;\n      })();\n      if (ios) {\n        systemInfo.navBarExtendHeight = 4; //下方扩展4像素高度 防止下方边距太小\n      } else {\n        systemInfo.navBarExtendHeight = 0;\n      }\n    }\n\n    systemInfo.navBarHeight = navBarHeight; //导航栏高度不包括statusBarHeight\n    systemInfo.capsulePosition = rect; //右上角胶囊按钮信息bottom: 58 height: 32 left: 317 right: 404 top: 26 width: 87 目前发现在大多机型都是固定值 为防止不一样所以会使用动态值来计算nav元素大小\n    systemInfo.ios = ios; //是否ios\n    Taro.globalSystemInfo = systemInfo; //将信息保存到全局变量中,后边再用就不用重新异步获取了\n    //console.log('systemInfo', systemInfo);\n    return systemInfo;\n  }\n}\nlet globalSystemInfo = getSystemInfo();\nclass AtComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      configStyle: this.setStyle(globalSystemInfo)\n    };\n  }\n\n  static options = {\n    multipleSlots: true,\n    addGlobalClass: true\n  };\n\n  componentDidShow() {\n    if (globalSystemInfo.ios) {\n      globalSystemInfo = getSystemInfo();\n      this.setState({\n        configStyle: this.setStyle(globalSystemInfo)\n      });\n    }\n  }\n  handleBackClick() {\n    if (_isFunction(this.props.onBack)) {\n      this.props.onBack();\n    } else {\n      const pages = Taro.getCurrentPages();\n      if (pages.length >= 2) {\n        Taro.navigateBack({\n          delta: this.props.delta\n        });\n      }\n    }\n  }\n  handleGoHomeClick() {\n    if (_isFunction(this.props.onHome)) {\n      this.props.onHome();\n    }\n  }\n  handleSearchClick() {\n    if (_isFunction(this.props.onSearch)) {\n      this.props.onSearch();\n    }\n  }\n  static defaultProps = {\n    extClass: '',\n    background: 'rgba(255,255,255,1)', //导航栏背景\n    color: '#000000',\n    title: '',\n    searchText: '点我搜索',\n    searchBar: false,\n    back: false,\n    home: false,\n    iconTheme: 'black',\n    delta: 1\n  };\n\n  state = {};\n\n  setStyle(systemInfo) {\n    const { statusBarHeight, navBarHeight, capsulePosition, navBarExtendHeight, ios, windowWidth } = systemInfo;\n    const { back, home, title, color } = this.props;\n    let rightDistance = windowWidth - capsulePosition.right; //胶囊按钮右侧到屏幕右侧的边距\n    let leftWidth = windowWidth - capsulePosition.left; //胶囊按钮左侧到屏幕右侧的边距\n\n    let navigationbarinnerStyle = [\n      `color:${color}`,\n      //`background:${background}`,\n      `height:${navBarHeight + navBarExtendHeight}px`,\n      `padding-top:${statusBarHeight}px`,\n      `padding-right:${leftWidth}px`,\n      `padding-bottom:${navBarExtendHeight}px`\n    ].join(';');\n    let navBarLeft = [];\n    if ((back && !home) || (!back && home)) {\n      navBarLeft = [\n        `width:${capsulePosition.width}px`,\n        `height:${capsulePosition.height}px`,\n        `margin-left:0px`,\n        `margin-right:${rightDistance}px`\n      ].join(';');\n    } else if ((back && home) || title) {\n      navBarLeft = [\n        `width:${capsulePosition.width}px`,\n        `height:${capsulePosition.height}px`,\n        `margin-left:${rightDistance}px`\n      ].join(';');\n    } else {\n      navBarLeft = [`width:auto`, `margin-left:0px`].join(';');\n    }\n    return {\n      navigationbarinnerStyle,\n      navBarLeft,\n      navBarHeight,\n      capsulePosition,\n      navBarExtendHeight,\n      ios,\n      rightDistance\n    };\n  }\n\n  render() {\n    const {\n      navigationbarinnerStyle,\n      navBarLeft,\n      navBarHeight,\n      capsulePosition,\n      navBarExtendHeight,\n      ios,\n      rightDistance\n    } = this.state.configStyle;\n    const {\n      title,\n      background,\n      backgroundColorTop,\n      back,\n      home,\n      searchBar,\n      searchText,\n      iconTheme,\n      extClass\n    } = this.props;\n    let nav_bar__center = null;\n    if (title) {\n      nav_bar__center = <text>{title}</text>;\n    } else if (searchBar) {\n      nav_bar__center = (\n        <View\n          className='lxy-nav-bar-search'\n          style={`height:${capsulePosition.height}px;`}\n          onClick={this.handleSearchClick.bind(this)}\n        >\n          <View className='lxy-nav-bar-search__icon' />\n          <View className='lxy-nav-bar-search__input'>{searchText}</View>\n        </View>\n      );\n    } else {\n      /* eslint-disable */\n      nav_bar__center = this.props.renderCenter;\n      /* eslint-enable */\n    }\n    return (\n      <View\n        className={`lxy-nav-bar ${ios ? 'ios' : 'android'} ${extClass}`}\n        style={`background: ${backgroundColorTop ? backgroundColorTop : background};height:${navBarHeight +\n          navBarExtendHeight}px;`}\n      >\n        <View\n          className={`lxy-nav-bar__placeholder ${ios ? 'ios' : 'android'}`}\n          style={`padding-top: ${navBarHeight + navBarExtendHeight}px;`}\n        />\n        <View\n          className={`lxy-nav-bar__inner ${ios ? 'ios' : 'android'}`}\n          style={`background:${background};${navigationbarinnerStyle};`}\n        >\n          <View className='lxy-nav-bar__left' style={navBarLeft}>\n            {back && !home && (\n              <View\n                onClick={this.handleBackClick.bind(this)}\n                className={`lxy-nav-bar__button lxy-nav-bar__btn_goback ${iconTheme}`}\n              />\n            )}\n            {!back && home && (\n              <View\n                onClick={this.handleGoHomeClick.bind(this)}\n                className={`lxy-nav-bar__button lxy-nav-bar__btn_gohome ${iconTheme}`}\n              />\n            )}\n            {back && home && (\n              <View className={`lxy-nav-bar__buttons ${ios ? 'ios' : 'android'}`}>\n                <View\n                  onClick={this.handleBackClick.bind(this)}\n                  className={`lxy-nav-bar__button lxy-nav-bar__btn_goback ${iconTheme}`}\n                />\n                <View\n                  onClick={this.handleGoHomeClick.bind(this)}\n                  className={`lxy-nav-bar__button lxy-nav-bar__btn_gohome ${iconTheme}}`}\n                />\n              </View>\n            )}\n            {!back && !home && this.props.renderLeft}\n          </View>\n          <View className='lxy-nav-bar__center' style={`padding-left: ${rightDistance}px`}>\n            {nav_bar__center}\n          </View>\n          <View className='lxy-nav-bar__right' style={`margin-right: ${rightDistance}px`}>\n            {this.props.renderRight}\n          </View>\n        </View>\n      </View>\n    );\n  }\n}\n\nexport default AtComponent;\n","// extracted by mini-css-extract-plugin","import React, { Component } from 'react'\nimport {\n  View\n} from '@tarojs/components';\n\nimport './page-activity.scss';\n\nexport default class PageActivity extends Component {\n  render() {\n    return (\n      <View>话题</View>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin","import React, { Component } from 'react'\n\nimport { Post } from '../../common/api';\nimport PostCard from '../../components/post-card/post-card';\nimport MyPage from '../../components/my-page/my-page';\n\nimport './page-recommend.scss';\n\nexport default class Recommend extends Component {\n\n  state = {\n    pageState: 0,\n    postList: [],\n    page: 1,\n    noMore: false,\n    showMoreLoading: false,\n  }\n\n  componentDidMount() {\n    this.init();\n  }\n\n  init = async () => {\n    const { page } = this.state;\n    const postList = await Post.getNewPosts(page);\n    if (postList) {\n      this.setState({\n        postList,\n        page: page + 1,\n        pageState: 3\n      });\n    } else {\n      this.setState({\n        pageState: 1,\n      });\n    }\n  }\n\n  // 加载更多\n  onScrollToLower = async () => {\n    const { page, postList, noMore } = this.state;\n    if (noMore) return;\n    this.setState({\n      showMoreLoading: true,\n    });\n\n    const newPostList = await Post.getNewPosts(page);\n    if (newPostList) {\n      this.setState({\n        postList: postList.concat(newPostList),\n        page: page + 1,\n        showMoreLoading: false\n      });\n    } else {\n      this.setState({\n        noMore: true,\n        showMoreLoading: false\n      });\n    }\n  }\n\n  // 刷新\n  onRefresh = async () => {\n    const { postList } = this.state;\n    const newPostList = await Post.getNewPosts(1);\n    if (newPostList && newPostList[0]['id'] !== postList[0]['id'] ) {\n      this.setState({\n        postList: newPostList,\n        page: 2,\n      });\n    } else {\n      Post.showToast('当前没有最新帖子');\n    }\n    this.mypage.hideRefresh();\n  }\n\n  onRef = (mypage) => {\n    this.mypage = mypage;\n  }\n\n  render() {\n    const { postList, pageState, showMoreLoading } = this.state;\n    return (\n      <MyPage\n        enableRefresh\n        state={pageState}\n        enableTips={false}\n        showMoreLoading={showMoreLoading}\n        onScrollToLower={this.onScrollToLower}\n        onRefresh={this.onRefresh}\n        onRef={this.onRef}\n        onRetry={this.init}\n      >\n        {\n          postList.map(post => (\n            <PostCard key={post.id} post={post} showOption canGoPost canUserHome />\n          ))\n        }\n      </MyPage>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin","import React, { Component } from 'react'\nimport Taro from '@tarojs/taro';\nimport {\n  View, ScrollView, Image, Text, Button\n} from '@tarojs/components';\n\nimport { AtIcon } from 'taro-ui';\n\nimport { Topic, Follow } from '../../common/api';\n\nimport MyPage from '../my-page/my-page';\n\nimport './page-topic.scss';\nimport '../../font.css'\n\nexport default class PageTopic extends Component {\n\n  state = {\n    pageState: 0,\n    tracks: [], // 保存在本地的最近访问话题\n    items: [], // 已关注话题列表\n    recommends: [], // 推荐的话题列表\n    // hasMore: true,\n    // isLoadData: false,\n    pageIndex: 1,\n    // pageSize: 15\n  }\n\n  componentDidMount () {\n    this.init();\n  }\n\n  init = async () => {\n    this.setState({\n      pageState: 0\n    });\n\n    let res = await Topic.myFollowTopics(1); // 获取我关注的topic\n    if (res) {\n      if (res.length > 0) {\n        this.setState({\n          items: res,\n          pageState: 3,\n          pageIndex: ++this.state.pageIndex\n        });\n      } else { // 如果我没有关注的话题，获取推荐的话题\n        res = await Topic.getTopicList(1);\n        if (res) {\n          this.setState({\n            pageState: 3,\n            recommends: res,\n          });\n        } else {\n          this.setState({\n            pageState: 1,\n          })\n        }\n      }\n    } else {\n      this.setState({\n        pageState: 1,\n      })\n    }\n  }\n\n  componentDidShow() {\n    const tracks = Topic.getTopicTrack();\n    if (tracks) {\n      this.setState({\n        tracks,\n      })\n    }\n  }\n\n  onScroll = (detail) => {\n    console.log(detail);\n  }\n\n  onScrollToLower = () => {\n\n  }\n\n  onRefresh = () => {\n    console.log('刷新');\n    setTimeout(() => {\n      this.mypage.hideRefresh();\n    }, 2000);\n  }\n\n  /**\n   * 清除最近访问的话题\n   */\n  onClean = () => {\n\n  }\n\n  /**\n   * 进入话题页面\n   * @param {number} id 话题的id\n   */\n  goTopic(id) {\n    Taro.navigateTo({\n      url: '/pages/subPackage/topic-home/topic-home?id='+id\n    });\n  }\n\n  /**\n   * 进入话题广场\n   */\n  goMaidan = () => {\n    Taro.navigateTo({\n      url: '/pages/topic-maidan/topic-maidan',\n    });\n  }\n\n  onRef = (page) => {\n    this.mypage = page;\n  }\n\n  async onFollow(e, item, index) {\n    const { recommends } = this.state;\n    let newRecommends = [...recommends];\n    let res = false;\n    if (newRecommends[index].hasFollow) {\n      res = await Follow.cancelFollowTopic(item.id);\n      newRecommends[index].hasFollow = false;\n    } else {\n      res = await Follow.followTopic(item.id);\n      newRecommends[index].hasFollow = true;\n    }\n    if (res) {\n      this.setState({\n        recommends: newRecommends,\n      });\n    }\n  }\n\n  render() {\n    const {\n      pageState,\n      items,\n      recommends,\n      tracks\n    } = this.state;\n    return (\n      <MyPage\n        enableRefresh\n        state={pageState}\n        enableTips={false}\n        showMoreLoading={false}\n        onScroll={this.onScroll}\n        onScrollToLower={this.onScrollToLower}\n        onRefresh={this.onRefresh}\n        onRef={this.onRef}\n        onRetry={this.init}\n      >\n        {\n          tracks ? (\n            <View className='tracks'>\n              <View className='top'>\n                <View className='title'>最近访问的话题</View>\n                <View className='btn' onClick={this.onClean}>\n                  <View className='icon icon-del-line'></View>\n                </View>\n              </View>\n              <ScrollView scrollX>\n                <View className='list'>\n                  {\n                    tracks.map((item) => (\n                      <View className='item' key={item.id} onClick={() => this.goTopic(item.id)}>\n                        <Image src={item.icon_path} />\n                        <View className='item-title'>{item.title}</View>\n                      </View>\n                    ))\n                  }\n                  <View className='item item-more' onClick={this.goMaidan}>\n                    <View className='ic'>\n                      <Text className='icon icon-more-line' />\n                    </View>\n                    <View className='item-title'>发现话题</View>\n                  </View>\n                </View>\n              </ScrollView>\n            </View>\n          ) : null\n        }\n        {\n          items.length ? (\n            <View className='follow recommends'>\n              <View className='title'>\n                <View className='left'>关注话题</View>\n                <View className='right' onClick={this.goMaidan}>\n                  <View>话题广场</View>\n                  <AtIcon value='chevron-right' size='16' color='#409eff'></AtIcon>\n                </View>\n              </View>\n              <View className='list'>\n                {\n                  items.map((item) => (\n                    <View\n                      className='item'\n                      key={item.id}\n                      hover-className='item-hover'\n                      onClick={() => this.goTopic(item.id)}\n                    >\n                      <Image src={item.icon_path} />\n                      <View className='item-content'>\n                        <View className='item-title'>{item.title}</View>\n                        <View className='item-des'>{item.des}</View>\n                      </View>\n                      <View className='item-action'>\n                        {/* <!-- <View className='num'>3</View> --> */}\n                      </View>\n                    </View>\n                  ))\n                }\n              </View>\n              <View className='footer' onClick={this.goMaidan}>\n                <View className='icon icon-add' />\n                <View>关注更多话题</View>\n              </View>\n            </View>\n          ) : (\n            <View>\n              <View className='empty'>\n                <View className='empty-content'>\n                  <View>你还没有关注话题,</View>\n                  <View>先关注一下吧!</View>\n                </View>\n              </View>\n              <View className='recommends'>\n                <View className='title'>\n                  <View className='left'>推荐话题</View>\n                  <View className='right' onClick={this.goMaidan}>\n                    <Text>话题广场</Text>\n                    <AtIcon value='chevron-right' size='16' color='#409eff'></AtIcon>\n                  </View>\n                </View>\n                <View className='list'>\n                  {\n                    recommends.map((item, index) => (\n                      <View\n                        className='item'\n                        key={item.id}\n                        onClick={() => this.goTopic(item.id)}\n                      >\n                        <Image src={item.icon_path} />\n                        <View className='item-content'>\n                          <View className='item-title'>{item.title}</View>\n                          <View className='item-des'>{item.des}</View>\n                        </View>\n                        <View className='item-action' onClick={(e) => {e.stopPropagation();this.onFollow(e, item, index)}}>\n                          <Button className={['btn', item.hasFollow ? 'has' : '']}>\n                            <Text className={['icon', item.hasFollow ? 'icon-follow' : 'icon-add']}></Text>\n                            <Text>{item.hasFollow ? '已关注' : '关注'}</Text>\n                          </Button>\n                        </View>\n                      </View>\n                    ))\n                  }\n                </View>\n              </View>\n            </View>\n          )\n        }\n      </MyPage>\n    );\n  }\n}\n","// extracted by mini-css-extract-plugin","import React, { Component } from 'react'\nimport {\n  View\n} from '@tarojs/components';\n\nimport { connect } from 'react-redux';\n\nimport tabChange from '../../actions/hometabs'\n\nimport './tab-bar.scss';\n\n@connect(({ hometabs }) => ({\n  hometabs\n}), (dispatch) => ({\n  dispatchTabChange(index) {\n    dispatch(tabChange(index))\n  }\n}))\nclass TabBar extends Component {\n\n  tabTap(index) {\n    this.props.dispatchTabChange(index);\n  }\n\n  render() {\n    const { selectedIndex, labels, hometabs: { tabIndex } } = this.props;\n    return (\n      <View className='tab-bar'>\n        <View className='tabs'>\n          {\n            labels && labels.map((item, index) => (\n              <View\n                className={['tab', index == selectedIndex? 'active' : '' ]}\n                key={`tabs_${index}`}\n                onClick={() => this.tabTap(index)}\n              >{item}</View>\n            ))\n          }\n          <View className='tab-bar' style={{left: `${tabIndex * 60 + 25}PX`}}></View>\n        </View>\n      </View>\n    );\n  }\n}\n\nexport default TabBar;\n","// extracted by mini-css-extract-plugin","import React, { Component } from 'react'\nimport Taro from '@tarojs/taro';\nimport { View } from '@tarojs/components';\nimport { connect } from 'react-redux';\n\n@connect(({ user }) => ({\n  user\n}))\nclass WithAuth extends Component {\n\n  isAuth = () => {\n    const { user, onClick } = this.props;\n    if (user.is_auth !== 2) {\n      Taro.showToast({\n        icon: 'none',\n        title: '请先认证学生身份'\n      });\n      return;\n    }\n    onClick();\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <View onClick={this.isAuth}>\n        {children}\n      </View>\n    );\n  }\n}\n\nexport default WithAuth;\n","// extracted by mini-css-extract-plugin","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./index.jsx\"\nvar config = {\"navigationBarTitleText\":\"首页\",\"navigationStyle\":\"custom\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/index/index', {}, config || {}))\n\n","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AASA;AAPA;AAAA;AACA;AADA;AAAA;AAEA;AACA;AACA;AACA;AAHA;AAFA;;;;;;;;;;;;;;;;AASA;AACA;AACA;AAFA;AACA;AAQA;AACA;;;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AADA;;;;;;;;AAhBA;AACA;AACA;;;AAmBA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAFA;AAMA;AACA;AADA;AAGA;AACA;AALA;AAkBA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAUA;;;;AArEA;AAwEA;;;;;;;;;;;;AChGA;AAEA;AACA;AACA;AADA;AAEA;;;;;;;;;;;;ACLA;AAAA;AAAA;AAIA;AACA;AACA;AADA;AAAA;AAGA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAGA;AACA;AACA;;;;;;;;;;;;;;AC3BA;AACA;AAEA;;;;;;;;;;;;;ACHA;AAEA;AACA;AACA;AADA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;AC7CA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrBA;AAEA;AACA;AACA;AADA;AAEA;AACA;AAAA;AAEA;;;;;;;;;;;;ACRA;AAAA;AAGA;AACA;AACA;AADA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;AC9BA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AACA;AACA;AACA;AADA;AAFA;AAKA;AACA;;;AAMA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;;;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AACA;AACA;AAAA;AAQA;AACA;AAAA;AACA;AAMA;AACA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAKA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AAFA;AAMA;AACA;AAFA;AAKA;AACA;AAFA;AAIA;AAAA;AAAA;AAGA;AACA;AAFA;AAOA;AACA;AAFA;AAMA;AAAA;AAEA;AACA;AAFA;AAKA;AACA;AAFA;AAQA;AAAA;AAAA;AAGA;AAAA;AAAA;AAMA;;;;AA9LA;AACA;AADA;AASA;AACA;AAFA;AACA;AATA;AA4CA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AACA;AAqJA;;;;;;;;;;;AChSA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AAIA;AACA;AACA;;;;;;;;;;;;;AACA;AACA;AAGA;;;;AALA;AACA;;;;;;;;;;;;ACRA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAEA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AADA;AAGA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAgBA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAGA;AACA;AADA;AACA;AAJA;AAAA;AACA;AADA;AAOA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAFA;AAIA;AACA;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAsBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAAA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAaA;AACA;AACA;AACA;;;;;;AA7DA;AACA;AACA;;;AA4DA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAMA;;;;AA5FA;AACA;;;;;;;;;;;;ACTA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AAIA;AAEA;AAEA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AARA;AACA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AACA;AAFA;AAAA;AACA;AADA;AAKA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AAHA;AACA;AATA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAcA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AADA;AAGA;AACA;AAzBA;AAAA;AAAA;AACA;AADA;AA2BA;AACA;AADA;AACA;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAyCA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AAgBA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;;;;;;AA1FA;AACA;AACA;;;AAmCA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;;;;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAKA;AACA;AANA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAQA;AACA;AACA;AAVA;AAWA;AACA;AACA;AADA;AAGA;AACA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;AAiBA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAOA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAaA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAHA;AAOA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AASA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAGA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAMA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAZA;AAmBA;AAAA;AAAA;AACA;AAAA;AAMA;AAAA;AACA;AAAA;AAKA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAGA;AAAA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AAKA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAbA;AA2BA;;;;AA5PA;AACA;;;;;;;;;;;;AChBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AAIA;AAEA;AAEA;AASA;AAPA;AAAA;AACA;AADA;AAAA;AAEA;AACA;AACA;AACA;AAHA;AAAA;;;;;;;;;;;;;AAOA;AACA;AACA;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AACA;AAAA;AAAA;AAHA;AADA;AAQA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AAxBA;AA2BA;;;;;;;;;;;AC7CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AAKA;AAHA;AAAA;AACA;AADA;AAAA;;;;;;;;;;;;;;;;AAKA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAEA;AACA;AAAA;AAIA;;;;AArBA;AAwBA;;;;;;;;;;;AChCA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;;;;A","sourceRoot":""}