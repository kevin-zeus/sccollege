{"version":3,"file":"pages/user-verify/user-verify.js","sources":["webpack:///./src/pages/user-verify/user-verify.jsx","webpack:///./src/pages/user-verify/user-verify.jsx?efe1","webpack:///./src/pages/user-verify/user-verify.scss"],"sourcesContent":["import React, { Component } from 'react';\nimport Taro from '@tarojs/taro';\nimport { View, Image } from '@tarojs/components';\n\nimport { AtInput, AtIcon } from 'taro-ui';\n\nimport Footer from '../../components/guide-footer/guide-footer';\nimport { User } from '../../common/api';\nimport './user-verify.scss'\n\nclass UserVerify extends Component {\n\n  state = {\n    user_name: '',\n    auth_image: '',\n  }\n\n  handleInputChange = (e) => {\n    this.setState({\n      user_name: e,\n    });\n  }\n\n  handleImgBoxClick = async () => {\n    const { auth_image } = this.state;\n    if (!auth_image) { // 选择图片\n      const url = await User.uploadAuthImg()\n      this.setState({\n        auth_image: url,\n      })\n    } else { // 浏览图片\n      Taro.previewImage({\n        current: auth_image,\n        urls: [auth_image]\n      });\n    }\n  }\n\n  doAuth = async () => {\n    const { user_name, auth_image  } = this.state;\n    if (!user_name) {\n      User.showToast('姓名不能为空');\n      return;\n    }\n    if (!auth_image) {\n      User.showToast('请上传一张学生证照片');\n      return;\n    }\n    Taro.showLoading();\n    const res = await User.applyAuth(user_name, auth_image);\n    Taro.hideLoading();\n    if (res) {\n      Taro.switchTab({\n        url: '/pages/me/me'\n      })\n    }\n  }\n\n  goMe = () => {\n    Taro.switchTab({\n      url: '../me/me',\n    });\n  }\n\n  render() {\n    const { user_name, auth_image } = this.state;\n    return (\n      <View>\n        <View className='box'>\n          <AtInput\n            border={false}\n            title='填写姓名'\n            placeholder='点击输入你的真实姓名'\n            value={user_name}\n            onChange={this.handleInputChange}\n          />\n        </View>\n        <View className='box'>\n          <View className='title'>上传学生证</View>\n          <View className='des'>学生证需清晰看到姓名、学校、院系、年级信息</View>\n          <View className='img_box' onClick={this.handleImgBoxClick}>\n            {\n              auth_image ? (\n                <Image className='img' src={User.parseQiniuImg(auth_image)} mode='aspectFit' />\n              ) : (\n                <View className='indicate'>\n                  <AtIcon value='camera' size='30' color='#989898' />\n                  <View className='des'>上传学生证首页展示照片</View>\n                </View>\n              )\n            }\n          </View>\n          <View className='tip'>提示</View>\n          <View className='tip'>1、我们将对你的证明材料严格保密</View>\n          <View className='tip'>2、提交后预计1个工作日内通过消息发送认证结果</View>\n          <View className='tip'>3、请确保提交的材料真实、合法、有效，否则会影响认证</View>\n        </View>\n        <Footer\n          btntext='提交资料'\n          onBtnTap={this.doAuth}\n          des='暂不认证'\n          onDesTap={this.goMe}\n        />\n      </View>\n    )\n  }\n}\n\nexport default UserVerify;\n","import { createPageConfig } from '@tarojs/runtime'\nimport component from \"../../../node_modules/@tarojs/mini-runner/node_modules/babel-loader/lib/index.js!./user-verify.jsx\"\nvar config = {\"navigationBarTitleText\":\"学生认证\"};\n\n\nvar inst = Page(createPageConfig(component, 'pages/user-verify/user-verify', {}, config || {}))\n\n","// extracted by mini-css-extract-plugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AADA;;;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAGA;AACA;AAAA;AACA;AADA;AACA;AALA;AAAA;AACA;AADA;AAOA;AACA;AACA;AACA;AAFA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAeA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAEA;AAHA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AAPA;AACA;AADA;AAUA;AAVA;AAAA;AACA;AADA;AAWA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAoBA;AACA;AACA;AADA;;;;;;;;AAKA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAQA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAKA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAJA;AAQA;;;;AA/FA;AACA;AAiGA;;;;;;;;;;;;;AC5GA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;;;;A","sourceRoot":""}